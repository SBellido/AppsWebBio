<div class="containerAll">
    <app-header-admin></app-header-admin>
    <div class="contains-body">
        <div class="titleAndButton">
            <h1 class="title">Encode Admin</h1>
        </div>

        <div *ngIf="user$ | async; then userTemplate else loading">
            <!-- template will replace this div -->
        </div>

        <!-- loading -->
        <ng-template #loading>
            <p>Cargando...</p>
        </ng-template>

        <!-- loaded -->
        <ng-template #userTemplate>
            <mat-card class="results-card" *ngIf="user$ | async as user">
                <mat-card-content>
    
                    <h1 class="mat-display-1">{{ user.name }}</h1>
    
                    <div class="user-info">
                        <p>Email: {{ user.email }}</p>
                        <p>Link: <a target="_blank" href="{{ user.uid | encodeLink }}">{{ user.uid | encodeLink }}</a>
                            <button ngxClipboard [cbContent]="user.uid | encodeLink">
                                <mat-icon aria-hidden="false" aria-label="copiar link">content_copy</mat-icon>
                            </button>
                        </p>
                        <p>Fecha de creación: {{ user.creationDate.toMillis() | date:'d/M/yyyy, h:mm a' }}</p>

                    </div>
    
                    <mat-tab-group>
                        <mat-tab label="Información Personal">
                            <h3>Datos Sociodemográficos</h3>
                            <div *ngIf="user.personalInfo.age > 0; then personal">
                                <!-- template will replace this div -->
                            </div>
                            <ng-template #personal>
                                <p>Edad: {{ user.personalInfo.age }}</p>
                                <p>Género: {{ user.personalInfo.gender }}</p>
                                <p>Nivel educativo: {{ user.personalInfo.educationLevel }}</p>

                                <div *ngIf="user.personalInfo.occupation.length > 0; then occupation">
                                    <!-- template will replace this div -->
                                </div>
                                <ng-template #occupation>
                                    <p>Ocupación: {{ user.personalInfo.occupation }}</p>
                                </ng-template>

                                <div *ngIf="user.personalInfo.ongoingCareer.length > 0; then career">
                                    <!-- template will replace this div -->
                                </div>
                                <ng-template #career>
                                    <p>Carrera en curso: {{ user.personalInfo.ongoingCareer }}</p>
                                </ng-template>
                            </ng-template>

                            <h3>Datos Salud</h3>
                            <div *ngIf="user.healthInfo.hasSleepDisorder; then sleepDisorder else noSleepDisorder">
                                <!-- template will replace this div -->
                            </div>
                            <ng-template #sleepDisorder>
                                <p>Tiene un desorden del sueño.</p>
                                <p>El cual es: {{ user.healthInfo.sleepDisorders }}</p>
                            </ng-template>
                            <ng-template #noSleepDisorder>
                                <p>No tiene un desorden del sueño.</p>
                            </ng-template>
                            
                            <div *ngIf="user.healthInfo.takesCronicMedicine; then cronicMedicine else noCronicMedicine">
                                <!-- template will replace this div -->
                            </div>
                            <ng-template #cronicMedicine>
                                <p>Consume medicación de forma crónica.</p>
                                <p>Las cuales son: {{ user.healthInfo.cronicMedicines }}</p>
                            </ng-template>
                            <ng-template #noCronicMedicine>
                                <p>No consume medicación de forma crónica.</p>
                            </ng-template>

                            <h3>Consentimiento</h3>
                            <br>
                            <br>
                        </mat-tab>
                        <mat-tab label="Dia 1">
                            <h3>Escala de grado de somnolencia</h3>
                            <br>
                            <br>
                            <h3>Audios</h3>
                            <br>
                            <br>
                        </mat-tab>
                        <mat-tab label="Dia 2">
                            <h3>Escala de grado de somnolencia</h3>
                            <br>
                            <br>
                            <h3>Ronda de reconocimiento</h3>
                            <br>
                            <br>
                            <h3>Audios</h3>
                            <br>
                            <br>
                        </mat-tab>
                    </mat-tab-group>
    
                </mat-card-content>
            </mat-card>
        </ng-template>

    </div>
</div>
